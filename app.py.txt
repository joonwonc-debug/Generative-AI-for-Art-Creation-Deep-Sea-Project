import streamlit as st
import os
from PIL import Image

# 1. í˜ì´ì§€ ê¸°ë³¸ ì„¤ì • (íƒ­ ì´ë¦„, ì•„ì´ì½˜ ë“±)
st.set_page_config(
    page_title="Deep Sea Unknowns",
    page_icon="ğŸ¦‘",
    layout="wide"
)

# 2. í—¤ë” ë° í”„ë¡œì íŠ¸ ì†Œê°œ
st.title("ğŸŒŠ ì‹¬í•´ì˜ ë¯¸ì§€: ìƒì„±í˜• AIë¡œ ë°œê²¬í•œ ìƒëª…ì²´ë“¤")
st.markdown("""
### Generative AI Art Exhibition
ì´ê³³ì€ ì¸ê°„ì˜ ì†ê¸¸ì´ ë‹¿ì§€ ì•Šì€ ê¹Šì€ ì‹¬í•´, ê·¸ê³³ì— ì¡´ì¬í•˜ëŠ” **ë¯¸ì§€ì˜ ìƒëª…ì²´**ë“¤ì„ ìƒìƒí•˜ì—¬ 
AI(Stable Diffusion/DALL-E)ì™€ í•¨ê»˜ ì‹œê°í™”í•œ ë””ì§€í„¸ ë„ê°ì…ë‹ˆë‹¤.

> *Created by [ë‹¹ì‹ ì˜ ì´ë¦„]*
""")
st.divider() # êµ¬ë¶„ì„ 

# 3. ì‚¬ì´ë“œë°” (ì‘í’ˆ ì„¤ëª…ì´ë‚˜ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ê³¼ì • ì†Œê°œ)
with st.sidebar:
    st.header("ğŸ¨ About Project")
    st.write("""
    **ì‚¬ìš©ëœ íˆ´:**
    - Stable Diffusion / DALL-E 3
    - Streamlit (Web App)
    
    **ì‘ì—… ê³¼ì •:**
    1. ì‹¬í•´ ìƒë¬¼ì˜ ìƒë¬¼í•™ì  íŠ¹ì§• í”„ë¡¬í”„íŒ…
    2. 'Bioluminescent', 'Transparent' ë“± í‚¤ì›Œë“œ ì¡°í•©
    3. ì´ë¯¸ì§€ íë ˆì´ì…˜ ë° ë³´ì •
    """)
    st.info("ì´ ìƒëª…ì²´ë“¤ì€ ì‹¤ì¡´í•˜ì§€ ì•Šìœ¼ë©°, AIì— ì˜í•´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.")

# 4. ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸° ë° ê°¤ëŸ¬ë¦¬ êµ¬ì„±
# images í´ë” ê²½ë¡œ ì„¤ì •
image_folder = "images"

# í´ë”ê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ ë°©ì§€
if not os.path.exists(image_folder):
    st.error(f"'{image_folder}' í´ë”ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ í´ë” ì•ˆì— images í´ë”ë¥¼ ë§Œë“¤ê³  ì‚¬ì§„ì„ ë„£ì–´ì£¼ì„¸ìš”.")
else:
    # ì´ë¯¸ì§€ íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° (png, jpg, jpeg ë“±)
    image_files = [f for f in os.listdir(image_folder) if f.endswith(('.png', '.jpg', '.jpeg'))]
    
    if not image_files:
        st.warning("images í´ë”ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤. ìƒì„±í•œ ì‚¬ì§„ì„ ë„£ì–´ì£¼ì„¸ìš”!")
    else:
        # ê°¤ëŸ¬ë¦¬ ë ˆì´ì•„ì›ƒ (3ì—´ë¡œ ë°°ì¹˜)
        cols = st.columns(3) 
        
        for idx, image_file in enumerate(image_files):
            # ì´ë¯¸ì§€ ì—´ê¸°
            img_path = os.path.join(image_folder, image_file)
            img = Image.open(img_path)
            
            # ê° ì»¬ëŸ¼ì— ìˆœì„œëŒ€ë¡œ ë°°ì¹˜ (0, 1, 2, 0, 1, 2...)
            with cols[idx % 3]:
                st.image(img, use_container_width=True)
                # íŒŒì¼ëª…ì—ì„œ í™•ì¥ì ì œê±°í•˜ê³  ìº¡ì…˜ìœ¼ë¡œ ì‚¬ìš© (ì„ íƒì‚¬í•­)
                caption = image_file.split('.')[0].replace('_', ' ').title()
                st.caption(f"**{caption}**")
                
                # í•„ìš”í•˜ë‹¤ë©´ ê°œë³„ ì„¤ëª… ì¶”ê°€ ê°€ëŠ¥ (Expander ì‚¬ìš©)
                with st.expander("ìƒëª…ì²´ ì •ë³´ ë³´ê¸°"):
                    st.write(f"ì´ ìƒëª…ì²´ëŠ” ìˆ˜ì‹¬ 5000m ì•„ë˜ì—ì„œ ë°œê²¬ëœ ì»¨ì…‰ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ({caption})")

st.divider()
st.write("Â© 2024 Generative AI Art Project. All rights reserved.")